<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Parameters</TITLE>
<META NAME="description" CONTENT="Parameters">
<META NAME="keywords" CONTENT="epileupmask">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="epileupmask.css">

<LINK REL="next" HREF="node9.html">
<LINK REL="previous" HREF="node3.html">
<LINK REL="up" HREF="epileupmask.html">
<LINK REL="next" HREF="node9.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
epileupmask (ebkgmap-2.9) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node7.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Behaviours and command-line arguments."></A>
<A HREF="epileupmask.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node9.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Errors"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node15.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="epileupmask.html">Home Page</A></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00040000000000000000">
Parameters</A>
</H1>This section documents the parameters recognized by this task (if any).
<BR><br><table width="100%" border=0 cellpadding=0 cellspacing=1>
<tr valign=top bgcolor='yellow'><td><b>Parameter</b></td><td><b>Mand </b></td><td><b>Type </b></td><td><b>Default </b></td><td><b>Constraints </b></td></tr>
<A NAME="epileupmask:description:parameters"></A>
<A NAME="470"></A>
<tr valign=top bgcolor='silver'><td><b>ratethreshold</b></td><td>yes</td><td><A HREF=../param/node3.html>real</A></td><td>0.008</td><td><SPAN CLASS="MATH"><IMG
 WIDTH="41" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.png"
 ALT="$0&lt;=$"></SPAN><TT>ratethreshold</TT></td></tr>

<tr valign=top><td colspan=5>
    The threshold of the rate, where the pixels having the rate larger than this value are regarded as `bad'.
    <br>&nbsp;</td></tr>

  <A NAME="479"></A>
<tr valign=top bgcolor='silver'><td><b>inputstyle</b></td><td>no</td><td><A HREF=../param/node3.html>string</A></td><td>evlist</td><td>evlist|image</td></tr>

<tr valign=top><td colspan=5>
    Whether the input file is eventlist or image.
    <br>&nbsp;</td></tr>

  <A NAME="486"></A>
<tr valign=top bgcolor='silver'><td><b>eventset</b></td><td>no</td><td><A HREF=../param/node3.html>dataset</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    Name of the input event list dataset used to construct the mask image. This parameter is read if <TT>inputstyle</TT>=`evlist'.
    <br>&nbsp;</td></tr>

  <A NAME="495"></A>
<tr valign=top bgcolor='silver'><td><b>imageset</b></td><td>no</td><td><A HREF=../param/node3.html>dataset</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    Name of the input image dataset used to construct the mask image. This parameter is read if <TT>inputstyle</TT>=`image'.
    <br>&nbsp;</td></tr>

  <A NAME="504"></A>
<tr valign=top bgcolor='silver'><td><b>evlo</b></td><td>no</td><td><A HREF=../param/node3.html>real</A></td><td>&nbsp;</td><td><SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$0&lt;$"></SPAN><TT>evlo</TT></td></tr>

<tr valign=top><td colspan=5>
    The lower energy bound of <TT>imageset</TT>.  This is mandatory only if <TT>inputstyle</TT>=`image'.
    <br>&nbsp;</td></tr>

  <A NAME="517"></A>
<tr valign=top bgcolor='silver'><td><b>evhi</b></td><td>no</td><td><A HREF=../param/node3.html>real</A></td><td>&nbsp;</td><td><SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$0&lt;$"></SPAN><TT>evhi</TT></td></tr>

<tr valign=top><td colspan=5>
    The upper energy bound of <TT>imageset</TT>.  This is mandatory only if <TT>inputstyle</TT>=`image'.
    <br>&nbsp;</td></tr>

  <A NAME="530"></A>
<tr valign=top bgcolor='silver'><td><b>issingleeventonly</b></td><td>no</td><td><A HREF=../param/node3.html>boolean</A></td><td>yes</td><td>yes|no</td></tr>

<tr valign=top><td colspan=5>
    This is read if <TT>inputstyle</TT>=`image'.  If the image includes only the single pixel events, this must be true.  Otherwise (false), all the other standard grade events (<I>e.g.</I>, 0-12 in MOSs) are assumed to be included in the image.
    <br>&nbsp;</td></tr>

  <A NAME="540"></A>
<tr valign=top bgcolor='silver'><td><b>outputstyle</b></td><td>no</td><td><A HREF=../param/node3.html>string</A></td><td>sky</td><td>sky|raw</td></tr>

<tr valign=top><td colspan=5>
    If `sky', the OOTE map is output in sky coordinates, to the file referred to by parameter <TT>ooteimageset</TT>. In this case a template set (<TT>templateset</TT>) is needed and the <TT>attstyle</TT> parameter is also read. If <TT>outputstyle</TT>=`raw' on the other hand the output is written to a cube (in the <TT>expcubeset</TT> format) to the file pointed to by <TT>ootecubeset</TT>.
    <br>&nbsp;</td></tr>

  <A NAME="559"></A>
<tr valign=top bgcolor='silver'><td><b>templateset</b></td><td>yes</td><td><A HREF=../param/node3.html>dataset</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    This parameter is read if <TT>outputstyle</TT>=`sky'. This file should contain an image in the primary extension, which is used to define the pixel dimensions and World Coordinates of the output image.
    <br>&nbsp;</td></tr>

  <A NAME="568"></A>
<tr valign=top bgcolor='silver'><td><b>maskset</b></td><td>no</td><td><A HREF=../param/node3.html>dataset</A></td><td>pileupmask.ds</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    If <TT>outputstyle</TT>=`sky', the output mask image in sky coordinates is written to this file name.  If <TT>outputstyle</TT>=`raw', the output mask cube image in chip coordinates is written to this file name.  
    <br>&nbsp;</td></tr>

  <A NAME="579"></A>
<tr valign=top bgcolor='silver'><td><b>attstyle</b></td><td>no</td><td><A HREF=../param/node3.html>string</A></td><td>binnedset</td><td>binnedset|template</td></tr>

<tr valign=top><td colspan=5>
    This parameter is read if <TT>outputstyle</TT>=`sky'. To convert from chip to sky coordinates it is necessary to know the spacecraft attitude. However the attitude is never completely stable and may vary significantly during an exposure. In this case the nett sky image must be a mosaic of components from different values of the attitude. A time series of attitude values (such as that made either by <A NAME="593"></A><A NAME="tex2html4"
  HREF="../attbin/index.html"><SPAN  CLASS="textbf">attbin</SPAN></A>
or <A NAME="597"></A><A NAME="tex2html5"
  HREF="../evproject/index.html"><SPAN  CLASS="textbf">evproject</SPAN></A>) can be supplied to parameter <TT>binnedattset</TT> if <TT>attstyle</TT> is set to `binnedset'. If it is judged that the attitude wander during the exposure did not exceed some small fraction of the image pixel dimensions, or if the binned attitude set is not available, then the user may choose to set <TT>attstyle</TT> to `template' instead. In this case a single fixed value of attitude is read from *_PNT keywords in the template image header.

<br>&nbsp;</td></tr>

  <A NAME="604"></A>
<tr valign=top bgcolor='silver'><td><b>binnedattset</b></td><td>yes</td><td><A HREF=../param/node3.html>dataset</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    If <TT>attstyle</TT>=`binnedset' the user should supply to the present parameter the name of a dataset which contains a time series of the spacecraft attitude variation during the exposure.  The user should be aware of the fact that if an attitude (time) bin (specified in this file) is too small, the time bin is unlikely to be processed (see the description of <TT>avcnttoprocess</TT> below).  Therefore it is recommended to create the <TT>binnedattset</TT>, allowing a relatively large attitude fluctuation, such as 1&nbsp;arcsec, so that attitude bins are not too finely split.
    <br>&nbsp;</td></tr>

  <A NAME="617"></A>
<tr valign=top bgcolor='silver'><td><b>avcnttoprocess</b></td><td>no</td><td><A HREF=../param/node3.html>real</A></td><td>7.0</td><td><SPAN CLASS="MATH"><IMG
 WIDTH="41" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.png"
 ALT="$0&lt;=$"></SPAN><TT>ratethreshold</TT></td></tr>

<tr valign=top><td colspan=5>
    When <TT>attstyle</TT>=`binnedset', the supplied <TT>binnedattset</TT> file may provide time durations with very short exposures.  In that case if a pixel happens to have an event during the short duration, the value of count/frame at that pixel in that duration is large and likely exceeds the threshold <TT>ratethreshold</TT>, and as a result that pixel will be masked as piled-up just because the pixel has one event at a wrong time.  To avoid this happening, any time duration with too short exposure should not be processed.  This parameter gives the threshold for it, <I>i.e.</I>, only when there are reasonable number of frames in the time duration, in which the averaged count, corresponding to the piled-up threshold, exceeds this parameter <TT>avcnttoprocess</TT>, the time duration is processed to calculate the output mask.  For example, if <TT>ratethreshold</TT>=0.008 and <TT>avcnttoprocess</TT>=7.0, each time duration should have the (maximum) number of frames larger than 875 so as to be used by the process, which corresponds to <SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$\sim$"></SPAN>2.3 ks for MOSs.  Note that because the single-event ratio at 12&nbsp;keV in MOSs is <SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.png"
 ALT="$\sim$"></SPAN>0.23 (0.54 for pn), <TT>avcnttoprocess</TT>=7.0 corresponds to just above 2 count per frame per pixel in MOSs for very high energy photons, after the grade-branching ratio is corrected.
    <br>&nbsp;</td></tr>

  <A NAME="641"></A>
<tr valign=top bgcolor='silver'><td><b>withrateimage</b></td><td>no</td><td><A HREF=../param/node3.html>boolean</A></td><td>no</td><td>yes|no</td></tr>

<tr valign=top><td colspan=5>
    If this is true, the rate imageset calculated is also output with the filename of <TT>ratesetroot</TT>.  If <TT>outputstyle</TT>=`sky', the rate image set is in sky coordinates, whereas if <TT>outputstyle</TT>=`raw', the rate set is the cube format in chip coordinates.  Note that the rate is corrected for the event at the energy of 1.487&nbsp;keV.
    <br>&nbsp;</td></tr>

  <A NAME="654"></A>
<tr valign=top bgcolor='silver'><td><b>ratesetroot</b></td><td>no</td><td><A HREF=../param/node3.html>dataset</A></td><td>rateset</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    This is read only if <TT>withrateimage</TT>=true.  See the section of <TT>withrateimage</TT> for detail.
    <br>&nbsp;</td></tr>

  <A NAME="665"></A>
<tr valign=top bgcolor='silver'><td><b>withboresightfudge</b></td><td>no</td><td><A HREF=../param/node3.html>boolean</A></td><td>yes</td><td>yes|no</td></tr>

<tr valign=top><td colspan=5>
    Flip the sign of the boresight euler%psi.  <B>This parameter will be removed</B> after the boresight is fixed. 
    <br>&nbsp;</td></tr>

  <A NAME="673"></A>
<tr valign=top bgcolor='silver'><td><b>selexprstyle</b></td><td>no</td><td><A HREF=../param/node3.html>string</A></td><td>userranges</td><td>userranges|dss|userexpr</td></tr>

<tr valign=top><td colspan=5>
    Use of task <A NAME="687"></A><A NAME="tex2html6"
  HREF="../epileupmask/index.html"><SPAN  CLASS="textbf">epileupmask</SPAN></A>
implies that the user wishes to model the background component of a real image. To do this properly it is necessary that the OOTE map and the image reflect the same selection of events. It is therefore necessary to provide details of the event selections used to construct the real image. Ideally the user should supply these in the form of the Data Subspace (DSS) of the actual image by selecting <TT>selexprstyle</TT>=`dss' and then supplying the file name of the image with the DSS to parameter <TT>dssset</TT>. However it has been found convenient to also allow the user to supply the event selection expression directly (via <TT>expression</TT>) or simply to choose to supply a set of energy ranges. The latter can be done by selecting <TT>selexprstyle</TT>=`userranges' and then supplying lists of values to <TT>evlo</TT> and <TT>evhi</TT>. Note that in this circumstance the assumption is made that no other significant non-spatial selections were made to create the original image.
    <br>&nbsp;</td></tr>

  <A NAME="697"></A>
<tr valign=top bgcolor='silver'><td><b>dssset</b></td><td>yes</td><td><A HREF=../param/node3.html>dataset</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    I <TT>selexprstyle</TT>=`dss', information about event selections is sought in a Data Subspace (DSS) of the primary extension of this dataset.
    <br>&nbsp;</td></tr>

  <A NAME="706"></A>
<tr valign=top bgcolor='silver'><td><b>expression</b></td><td>yes</td><td><A HREF=../param/node3.html>string</A></td><td>&nbsp;</td><td>&nbsp;</td></tr>

<tr valign=top><td colspan=5>
    This parameter is read if <TT>selexprstyle</TT>=`userexpr'. It should contain the selection expression used to construct the original image.
    <br>&nbsp;</td></tr>

<tr valign=top bgcolor='yellow'><td><b>Parameter</b></td><td><b>Mand </b></td><td><b>Type </b></td><td><b>Default </b></td><td><b>Constraints </b></td></tr>
</table>

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node7.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Behaviours and command-line arguments."></A>
<A HREF="epileupmask.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node9.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Errors"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node15.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
