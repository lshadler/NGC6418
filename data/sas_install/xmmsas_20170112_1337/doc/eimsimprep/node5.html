<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Sky masks for individual exposures</TITLE>
<META NAME="description" CONTENT="Sky masks for individual exposures">
<META NAME="keywords" CONTENT="eimsimprep">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="eimsimprep.css">

<LINK REL="next" HREF="node6.html">
<LINK REL="previous" HREF="node4.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node6.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
eimsimprep (eimsim-2.3) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node4.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Make sky masks"></A>
<A HREF="node4.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Make sky masks"></A>
<A HREF="node6.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Sky coverage of the"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node16.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="eimsimprep.html">Home Page</A> / <A  HREF="node2.html">Description</A> / <A  HREF="node4.html">Make sky masks</A></DIV>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00022100000000000000">
Sky masks for individual exposures</A>
</H3>

<P>
Creation of count-rate images from many superposed PSFs has been found to be the part of the simulations procedure which takes the longest time. It is therefore desirable not to attempt to add sources to the image unless they are likely to make a significant contribution to it - ie there is no point in simulating an image of a source at -30 dec when the 1/2-degree field of view is centred on +20 dec; one may as well save oneself the trouble. This source-screening is done by preparing a mask image and only processing those sources which lie within `live' areas of the mask.

<P>
Each mask is made from the exposure map for that instrument and energy band. Exposure maps are required inputs to <A NAME="659"></A><A NAME="tex2html30"
  HREF="../eimsimprep/index.html"><SPAN  CLASS="textbf">eimsimprep</SPAN></A>
(see section <A HREF="node13.html#eimsimprep:description:inputfiles">5</A>) in order to delineate the edges of the CCDs and of the field of view. If the exposure value is non-zero at the location of a source, then this source should clearly be among those used to make the count-rate image. The initial step in making the mask is therefore to set all pixels for which the exposure is non-zero to TRUE. However, one is to consider that a source which lies only a little way off the edge of the exposure may still make some contribution to the count-rate image due to the wings of its PSF. The TRUE area of the mask is therefore extended some little distance into the zero-exposure region. The width of this padding is set via the parameter <TT>padsizearcsec</TT>.

<P>
The algorithm to add the pad is as follows. First, the initial mask (from the non-zero pixels of the exposure map) is made. Then all edge pixels are identified - ie, all those for which the central pixel of a 9x9 square is TRUE but at least one of the eight neighbours is not. Finally, for each of these edge pixels, a circular blob of <TT>padsizearcsec</TT> radius is added to the final mask.

<P>
NOTE! These masks are NOT the same as the detection masks made by such tasks as <A NAME="665"></A><A NAME="tex2html31"
  HREF="../emask/index.html"><SPAN  CLASS="textbf">emask</SPAN></A>
during source detection.

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node4.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Make sky masks"></A>
<A HREF="node4.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Make sky masks"></A>
<A HREF="node6.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Sky coverage of the"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node16.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
