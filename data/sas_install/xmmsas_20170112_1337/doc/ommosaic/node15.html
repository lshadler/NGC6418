<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Initialization (image alignment mode)</TITLE>
<META NAME="description" CONTENT="Initialization (image alignment mode)">
<META NAME="keywords" CONTENT="ommosaic">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ommosaic.css">

<LINK REL="next" HREF="node17.html">
<LINK REL="previous" HREF="node14.html">
<LINK REL="up" HREF="node13.html">
<LINK REL="next" HREF="node16.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
ommosaic (ommosaic-2.8.1) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node14.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Coordinate conversions"></A>
<A HREF="node13.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Algorithm- Sky Images"></A>
<A HREF="node16.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Initialization example"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node28.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="ommosaic.html">Home Page</A> / <A  HREF="node13.html">Algorithm- Sky Images</A></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00092000000000000000">
Initialization (image alignment mode)</A>
</H2>

<P>
<PRE>
    Read the list of input files on the command-line.
   

    Read the input parameter nsigma
    Read the input parameter minnumpixels
    Read the input parameter minfraction

    Set nFiles to the number of files

    
    Loop through each file (i=1 to nFiles)

        
        Compute the mean  background of the image.
        Compute the number of image pixels that have a value &gt;= mean background + 
        nsigma * sqrt(mean background)
        and store this value in the vector numberGoodPixels     

    End Loop

    Create an empty vector, called alignment, that will store details of pairs of 
    images that can possibly aligned 
    Loop through each file (i=0 to nFiles-1)
        if numberGoodPixels[i] &lt; minnumpixels skip this value of i
        Loop through from j=i+1 to nFiles - 1
            if numberGoodPixels[j] &lt; minnumpixels skip this value of j
            if( the area overlap of the two images divided by the maximum area of the 
            two images is less than minfraction skip this value of j 
            Add i, j, and the number of usable pixels to the alignment vector. 
        End loop
    End loop

   Sort the alignment vector in order of decreasing overlap area
</PRE>

<P>
<HR> <BR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html228"
  HREF="node16.html">Initialization example</A>
</UL>
<!--End of Table of Child-Links-->
<HR> <BR>
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
