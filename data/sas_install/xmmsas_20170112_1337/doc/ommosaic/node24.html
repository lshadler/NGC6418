<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Testing</TITLE>
<META NAME="description" CONTENT="Testing">
<META NAME="keywords" CONTENT="ommosaic">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ommosaic.css">

<LINK REL="next" HREF="node25.html">
<LINK REL="previous" HREF="node21.html">
<LINK REL="up" HREF="ommosaic.html">
<LINK REL="next" HREF="node25.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
ommosaic (ommosaic-2.8.1) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node23.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Stacking of sky-images after"></A>
<A HREF="ommosaic.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node25.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Comments"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node28.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="ommosaic.html">Home Page</A></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION000110000000000000000">
Testing</A>
</H1>
<SPAN  CLASS="textbf">Ommosaic</SPAN> contains a test-harness that can check any of the following things:

<OL>
<LI>That a list of sky images derived from a master image have been properly aligned and stacked.
</LI>
<LI>That a list of unrotated images derived from a master image have been properly aligned and stacked.
</LI>
<LI>That a list of sky-images derived from a master sky-image have been properly stacked.
</LI>
<LI>That a list of unrotated images derived from a master sky image have been properly stacked.

<P>
</LI>
</OL>

<P>
Due to time constraints, only the two first of these tests are done when the package is built. The latter two
can be done by editing the program <SPAN  CLASS="textbf">createtest.cc</SPAN> in the directory <SPAN  CLASS="textbf">test</SPAN>.

<P>
A program <SPAN  CLASS="textbf">createst.cc</SPAN> does the following

<OL>
<LI>Creates a 256x256 test image file (<SPAN  CLASS="textbf">test.fits</SPAN>), with a random background (1-500) and a random number of point-sources
(10-100) at random positions on the image.
</LI>
<LI>A master unrotated image file (<SPAN  CLASS="textbf">test1.fits</SPAN>) is cloned from test.fits and FITS header keywords such as <SPAN  CLASS="textbf">WINDOWX0,
WINDOWY0</SPAN> are added to it.

<P>
</LI>
<LI>10 Unrotated-images files are cloned from <SPAN  CLASS="textbf">test1.fits</SPAN>, and the FITS keywords <SPAN  CLASS="textbf">WINDOWX0</SPAN> and <SPAN  CLASS="textbf">WINDOWY0</SPAN> are given
random small offsets.

<P>
</LI>
<LI>A master sky image file (<SPAN  CLASS="textbf">test2.fits</SPAN>) is cloned from <SPAN  CLASS="textbf">test.fits</SPAN> and FITS header keywords such as <SPAN  CLASS="textbf">CRPIX,
CRVAL1</SPAN> are added to it.

<P>
</LI>
<LI>10 Sky-images files are cloned from <SPAN  CLASS="textbf">test2.fits</SPAN>, and the FITS keywords <SPAN  CLASS="textbf">CRPIX1</SPAN> and <SPAN  CLASS="textbf">CRPIX2</SPAN> are given
random small offsets.

<P>
</LI>
<LI><SPAN  CLASS="textbf">Ommosaic</SPAN> is run on <SPAN  CLASS="textbf">test1.fits</SPAN> and <SPAN  CLASS="textbf">test2,fits</SPAN> to produce output files <SPAN  CLASS="textbf">test3.fits</SPAN> and <SPAN  CLASS="textbf">test4.fits</SPAN>.

<P>
</LI>
<LI>A program called <SPAN  CLASS="textbf">checkoutput.cc</SPAN> compares <SPAN  CLASS="textbf">test3.fits</SPAN> with <SPAN  CLASS="textbf">test1.fits</SPAN>- it checks that the image dimensions
are the same as well as each corresponding image pixels. Any differences (beyond rounding errors, etc) are reported
and the test is deemed to have failed.

<P>
</LI>
<LI>checkooutput.cc then compares <SPAN  CLASS="textbf">test4.fits</SPAN> with <SPAN  CLASS="textbf">test2.fits</SPAN>, and does the same tests as before. 

<P>
</LI>
</OL>

<P>
For program development testing the number of images can be increased and the image dimensions, etc, changed.

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node23.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Stacking of sky-images after"></A>
<A HREF="ommosaic.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node25.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Comments"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node28.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
