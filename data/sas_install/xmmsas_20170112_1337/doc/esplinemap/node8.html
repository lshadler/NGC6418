<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Algorithm</TITLE>
<META NAME="description" CONTENT="Algorithm">
<META NAME="keywords" CONTENT="esplinemap">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="esplinemap.css">

<LINK REL="next" HREF="node9.html">
<LINK REL="previous" HREF="node7.html">
<LINK REL="up" HREF="esplinemap.html">
<LINK REL="next" HREF="node9.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
esplinemap (esplinemap-5.0) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node7.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Output Files"></A>
<A HREF="esplinemap.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node9.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Comments"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node12.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="esplinemap.html">Home Page</A></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00080000000000000000"></A>
<A NAME="esplinemap:description:algorithm"></A>
<BR>
Algorithm
</H1>

<P>
<PRE>
subroutine esplinemap

  
  1) If out-of-time events flag is set: Calculate background due to
     OOT events and subtract from image.
  2) Remove source count dependent circular area around EBOXDETECT 
     (local mode) sources
     which have detection likelihoods greater than a specifiable
     threshold from the image. 
  3) If exposure flag is set, divide image by exposure map.
  4) Perform spline fit of image, using a user-specifiable
     number of spline nodes. If detection mask flag is set,
     only use image regions marked by detection mask. 
  5) If exposure flag is set, multiply spline image by exposure map.
  6) IF rebinned image pixels contain excesses above spline fit  
     THEN
       remove excesses from image and repeat (2) - (5) a specifiable 
       number of times
     END IF
   7) If out-of-time events flag is set: Add OOT events background to background map.

end subroutine  esplinemap
</PRE>

<P>
<HR> <BR>
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
