<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Testing</TITLE>
<META NAME="description" CONTENT="Testing">
<META NAME="keywords" CONTENT="ommergelists">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="ommergelists.css">

<LINK REL="next" HREF="node15.html">
<LINK REL="previous" HREF="node13.html">
<LINK REL="up" HREF="ommergelists.html">
<LINK REL="next" HREF="node15.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
ommergelists (ommergelists-1.0.5) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node13.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Example of comparison plots"></A>
<A HREF="ommergelists.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node15.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Future developments"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node17.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="ommergelists.html">Home Page</A></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION000110000000000000000">
Testing</A>
</H1>

<P>
The aim of the test is to check that <SPAN  CLASS="textbf">ommergelists</SPAN>

<OL>
<LI>Correctly constructs the new output source-list file by 

<UL>
<LI>Checking that the merged SRCLIST table contains all the columns in the SRCLIST table of the
first source-list file plus the columns unique to the SRCLIST table of the second 
input source-list file.
</LI>
<LI>Correctly finds the identical sources in the two input source-list files.
</LI>
<LI>The data in each row of each column of the merged SRCLIST data is correct.
</LI>
<LI>Correctly sorts the merged table into order of increasing Right Ascension.
</LI>
</UL>
</LI>
</OL>

<P>
A program <SPAN  CLASS="textbf">createtest</SPAN> creates the test files and works as follows-

<P>

<OL>
<LI>It creates an observation source-list file (<SPAN  CLASS="textbf">test1.fits</SPAN> that contains the columns
<SPAN  CLASS="textbf">RA_CORR</SPAN>, <SPAN  CLASS="textbf">DEC_CORR</SPAN>, <SPAN  CLASS="textbf">U_RAW_RATE</SPAN>, <SPAN  CLASS="textbf">U_CORR_RATE</SPAN> and <SPAN  CLASS="textbf">U_EXTENSION_FLAG</SPAN>.

<P>
</LI>
<LI>A randow number of rows, between 10 and 1000, is added to the table.
</LI>
<LI>The table is filled by generating random values for each row of each column.

<P>
</LI>
<LI>A second observation source-list file (<SPAN  CLASS="textbf">test2.fits</SPAN> is created that contains the columns
<SPAN  CLASS="textbf">RA_CORR</SPAN>, <SPAN  CLASS="textbf">DEC_CORR</SPAN>, <SPAN  CLASS="textbf">V_RAW_RATE</SPAN>, <SPAN  CLASS="textbf">V_CORR_RATE</SPAN> and <SPAN  CLASS="textbf">V_EXTENSION_FLAG</SPAN>.

<P>
</LI>
<LI>A randow number of rows, between 10 and 1000, is added to the table.

<P>
</LI>
<LI>The table is filled by selecting random rows from the first SRCLIST table and by filling
the columns of the unfilled rows unfilled with random values. 

<P>
</LI>
<LI>A third source-list file <SPAN  CLASS="textbf">test3.fits</SPAN> is then formed from <SPAN  CLASS="textbf">test1.fits</SPAN> and 
all the unique sources in <SPAN  CLASS="textbf">test2.fits</SPAN> with raw count-rates  no greater than 5.0 are added to it. 
This file will therefore contain columns for filters <SPAN  CLASS="textbf">U</SPAN> and <SPAN  CLASS="textbf">V</SPAN>.

<P>
</LI>
<LI>The <SPAN  CLASS="textbf">SRCLIST</SPAN> tables in the files <SPAN  CLASS="textbf">test1.fits</SPAN>, <SPAN  CLASS="textbf">test2.fits</SPAN> and <SPAN  CLASS="textbf">test3.fits</SPAN> are 
sorted into increasing RA order.

<P>
</LI>
<LI><SPAN  CLASS="textbf">ommergelists</SPAN> is then executed with <SPAN  CLASS="textbf">test1.fits</SPAN> and <SPAN  CLASS="textbf">test2.fits</SPAN>  as input source-list files 
and it produces a merged source-list file <SPAN  CLASS="textbf">test4.fits</SPAN>. 

<P>
</LI>
<LI>A progam <SPAN  CLASS="textbf">checkoutput</SPAN> is then run to check the following

<UL>
<LI>That the <SPAN  CLASS="textbf">SRCLIST</SPAN> table in <SPAN  CLASS="textbf">test3.fits</SPAN> contains the same number of rows as the <SPAN  CLASS="textbf">SRCLIST</SPAN>
table in <SPAN  CLASS="textbf">test4.fits</SPAN>.
</LI>
<LI>That the RA values in the <SPAN  CLASS="textbf">SRCLIST</SPAN> table of <SPAN  CLASS="textbf">test3.fits</SPAN> are in order of increasing RA. 

<P>
</LI>
<LI>That each value in each row of each of the columns <SPAN  CLASS="textbf">RA_CORR</SPAN>, <SPAN  CLASS="textbf">DEC_CORR</SPAN>, <SPAN  CLASS="textbf">U_RAW_RATE</SPAN> 
and <SPAN  CLASS="textbf">B_RAW_RATE</SPAN> in the <SPAN  CLASS="textbf">SRCLIST</SPAN> table of <SPAN  CLASS="textbf">test3.fits</SPAN> are identical to the corresponding values 
in <SPAN  CLASS="textbf">test4.fits</SPAN> to within a tolerance (0.0001 arcsecs for <SPAN  CLASS="textbf">RA_CORR</SPAN> and <SPAN  CLASS="textbf">DEC_CORR</SPAN> and 1e-6 for the remainder)-between 
any bigger difference  is reported as an error and the test 
is deemed to have failed. 
</LI>
<LI>That the algorithm for computing the angular distance between 2 sources is correct. One thousand sources with random
RAs and Decs are produced and a second list of sources is produced from this having small known angular separations.
The distances between each source in the first list and its corresponding one in the second list is computed using
the algorithm that <SPAN  CLASS="textbf">ommergelists</SPAN> and any deviation greater then 0.001 arcsecs from the known deviation is reported
as an error and the test deemed to have failed.
</LI>
</UL>
</LI>
</OL>

<P>
The actual testing is controlled by a shell program in the <SPAN  CLASS="textbf">ommergelists</SPAN> test directory and 
is initiated by typing the command <SPAN  CLASS="textbf">make test</SPAN>. To do the testing in <SPAN  CLASS="textbf">low memory</SPAN> mode,
you should set the environment variable <SPAN  CLASS="textbf">SAS_MEMORY_MODEL</SPAN> equal to <SPAN  CLASS="textbf">low</SPAN>. <SPAN  CLASS="textbf">Note</SPAN> that
at the daily builds at Villspa the testing of all SAS software packages is done in both <SPAN  CLASS="textbf">high</SPAN> and <SPAN  CLASS="textbf">low</SPAN>
memory modes (referring to the memory model used by the <SPAN  CLASS="textbf">SAS Data Access Layer</SPAN>).

<P>
For more demanding development testing, the number of <SPAN  CLASS="textbf">SWS</SPAN> files can be set to any number by editing
the program <SPAN  CLASS="textbf">createfiles</SPAN>- tests have been done by setting the number of rows in the <SPAN  CLASS="textbf">SRCLIST</SPAN> table in 
<SPAN  CLASS="textbf">test1.fits</SPAN> to 1,000,000.

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node13.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Example of comparison plots"></A>
<A HREF="ommergelists.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Home Page"></A>
<A HREF="node15.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Future developments"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node17.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
