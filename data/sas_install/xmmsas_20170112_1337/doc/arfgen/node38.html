<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Initialisation</TITLE>
<META NAME="description" CONTENT="Initialisation">
<META NAME="keywords" CONTENT="arfgen">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="arfgen.css">

<LINK REL="next" HREF="node39.html">
<LINK REL="previous" HREF="node37.html">
<LINK REL="up" HREF="node37.html">
<LINK REL="next" HREF="node39.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
arfgen (arfgen-1.93.1) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node37.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Algorithm"></A>
<A HREF="node37.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Algorithm"></A>
<A HREF="node39.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Main stage: Generate area"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node44.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="arfgen.html">Home Page</A> / <A  HREF="node37.html">Algorithm</A></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION000111000000000000000">
Initialisation</A>
</H2>
<UL>
<LI>From parameter settings and the relevant attributes in the spectral file,
        set the state of the arfgen data server before processing is performed.
        For example, if a detector map is specified,
	read in that detector map. If a particular factor is requested to be included
        in the ARF by the user, set the data server (ie create the relevant objects) 
        to provide that correction.
	Also perform various checks, such as ensuring that the correct global attributes
	are present in the spectrum dataset, and
	ensuring that the extents of the selected 
	regions lie inside the bounds of the detector map.

<P>
</LI>
<LI>Convert the input detector map into a pixel list,
	and filter this using the Data SubSpace information
	stored in the input spectum dataset as detailed below.
	The result is an internal, filtered detector map
	that is used in the subsequent processing.

<P>

<UL>
<LI>From the detector map, generate a table containing the columns <A NAME="2288"></A><TT>DETX</TT>, <A NAME="2290"></A><TT>DETY</TT> and <A NAME="2292"></A><TT>VALUE</TT>, describing the DET coordinates and value for each pixel in the detector map.
</LI>
<LI>Add a dummy TIME column (required by <A NAME="2294"></A><A NAME="tex2html66"
  HREF="../attcalc/index.html"><SPAN  CLASS="textbf">attcalc</SPAN></A>, 

although not used directly, as <A NAME="2298"></A><A NAME="tex2html67"
  HREF="../attcalc/index.html"><SPAN  CLASS="textbf">attcalc</SPAN></A>
is called with <TT>attitudelabel</TT> <SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img1.png"
 ALT="$=$"></SPAN> `user`. )
</LI>
<LI>Run <A NAME="2303"></A><A NAME="tex2html68"
  HREF="../attcalc/index.html"><SPAN  CLASS="textbf">attcalc</SPAN></A>
on table, generating sky (<A NAME="2307"></A><TT>X</TT>, <A NAME="2309"></A><TT>Y</TT>) columns
</LI>
<LI>Get the DSS information from the spectrum dataset, and 'project' this information onto the planes
that contain the POS and the DET axes pairs. 
</LI>
<LI>filter the table using the projected DSS information.
	
</LI>
</UL>

<P>
</LI>
</UL>

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node37.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Algorithm"></A>
<A HREF="node37.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Algorithm"></A>
<A HREF="node39.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Main stage: Generate area"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node44.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
