<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2016 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Lock and stop files</TITLE>
<META NAME="description" CONTENT="Lock and stop files">
<META NAME="keywords" CONTENT="eimsimbatch">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2016">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="eimsimbatch.css">

<LINK REL="previous" HREF="node4.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node6.html">
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE"VLINK="#551A8B" ALINK="#FF0000"><A HREF=http://xmm.esac.esa.int/sas/><IMG SRC="../icons/xmmsaslogo.gif" ALT="XMM-Newton SAS Home Page" HEIGHT=60 WIDTH=60 ALIGN="LEFT"></A>
<DIV ALIGN=RIGHT><B><FONT SIZE=+2>XMM-Newton Science Analysis System</FONT>
<BR>
<BR>
<BR>
eimsimbatch (eimsim-2.3) [xmmsas_20170112_1337-16.0.0]</B></DIV>
<BR CLEAR=ALL>

<DIV CLASS="navigation"><A HREF="node4.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Errors and cleaning up"></A>
<A HREF="node4.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Errors and cleaning up"></A>
<A HREF="node6.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Parameters"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node10.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
<BR><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A  HREF="../packages.html">Meta Index</A> / <A  HREF="eimsimbatch.html">Home Page</A> / <A  HREF="node2.html">Description</A> / <A  HREF="node4.html">Errors and cleaning up</A></DIV>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00022100000000000000"></A>
<A NAME="eimsimbatch:description:lockstop"></A>
<BR>
Lock and stop files
</H3>

<P>
Task <A NAME="607"></A><A NAME="tex2html34"
  HREF="../eimsimbatch/index.html"><SPAN  CLASS="textbf">eimsimbatch</SPAN></A>
writes a lock file in the PWD when it commences running. The filename of this lock file has the format `lock_<SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$&lt;$"></SPAN><TT>streamnumber</TT><SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img4.png"
 ALT="$&gt;$"></SPAN>'. This helps to prevent any other invocation of <A NAME="612"></A><A NAME="tex2html35"
  HREF="../eimsimbatch/index.html"><SPAN  CLASS="textbf">eimsimbatch</SPAN></A>
with the same <TT>streamnumber</TT> running in the same PWD. It isn't foolproof, since it sets up a `race condition'. (Google if curious.) The task deletes the lock file at the end of operations. If the task fails with an error, this lock file remains undeleted and will prevent renewed invocation of the task with the same <TT>streamnumber</TT> until it is deleted by hand.

<P>
If you want to halt <A NAME="618"></A><A NAME="tex2html36"
  HREF="../eimsimbatch/index.html"><SPAN  CLASS="textbf">eimsimbatch</SPAN></A>
at the end of a processing loop, halt it `nicely' that is, without resorting to control-Cs or `kills', this may be accomplished by writing a stop file, of filename format `stop_<SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$&lt;$"></SPAN><TT>streamnumber</TT><SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img4.png"
 ALT="$&gt;$"></SPAN>', into the PWD. Doing `touch stop_<SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img3.png"
 ALT="$&lt;$"></SPAN><TT>streamnumber</TT><SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img4.png"
 ALT="$&gt;$"></SPAN>' is sufficient. The task deletes the stop file before exiting.

<P>

<DIV CLASS="navigation"><IMG BORDER="0" SRC="../icons/bar.gif">
<BR><A HREF="node4.html"><IMG BORDER="0" SRC="../icons/prev.gif" ALT="Errors and cleaning up"></A>
<A HREF="node4.html"><IMG BORDER="0" SRC="../icons/up.gif" ALT="Errors and cleaning up"></A>
<A HREF="node6.html"><IMG BORDER="0" SRC="../icons/next.gif" ALT="Parameters"></A>
<A HREF="index.html"><IMG BORDER="0" SRC="../icons/home.gif" ALT="Home"></A>

<A HREF="node10.html"><IMG BORDER="0" SRC="../icons/index.gif" ALT="Index"></A>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
XMM-Newton SOC/SSC -- 2017-01-12
</ADDRESS>
</BODY>
</HTML>
